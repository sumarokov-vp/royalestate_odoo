# Royal Estate — Спецификация модуля

Модуль Odoo 19 для ведения базы объектов недвижимости риэлторского агентства.

## Документация

| Документ | Описание |
|----------|----------|
| [DATA_MODEL.md](./DATA_MODEL.md) | Архитектура хранения данных (EAV) |
| [ATTRIBUTES.md](./ATTRIBUTES.md) | Полный список атрибутов (56 шт.) |
| [INTEGRATIONS.md](./INTEGRATIONS.md) | Интеграции (CRM, ERP, 2GIS, S3) |

---

## Обзор

### Назначение

- Централизованное хранение информации об объектах недвижимости
- Интеграция со стандартным модулем CRM Odoo для ведения сделок
- Поддержка специализированной модели работы агентства (ISA + Closing Agents)

### Архитектура

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│  Odoo CRM       │────▶│  Royal Estate   │◀────│  ERP (Telegram) │
│  (сделки)       │     │  (объекты)      │     │  (зарплаты)     │
└─────────────────┘     └─────────────────┘     └─────────────────┘
```

---

## Типы объектов

| Тип | Код | Специфика |
|-----|-----|-----------|
| Квартира | `apartment` | Этаж, подъезд |
| Дом | `house` | Участок, материал стен |
| Коммерция | `commercial` | Назначение, витрины |
| Земля | `land` | Категория, коммуникации |

---

## Типы сделок

| Тип | Код |
|-----|-----|
| Продажа | `sale` |
| Долгосрочная аренда | `rent_long` |
| Посуточная аренда | `rent_daily` |

---

## Модель данных

### Подход: EAV (Entity-Attribute-Value)

Вместо 50+ колонок в одной таблице:
- **Основная таблица** (~15 полей) — обязательные данные
- **Справочник атрибутов** — описание характеристик
- **Таблица значений** — только заполненные характеристики

Подробнее: [DATA_MODEL.md](./DATA_MODEL.md)

### Основные поля `estate.property`

| Поле | Описание |
|------|----------|
| `name` | Заголовок |
| `property_type` | Тип объекта |
| `deal_type` | Тип сделки |
| `price` | Цена |
| `rooms` | Комнаты |
| `area_total` | Площадь |
| `district_id` | Район |
| `street` | Улица |
| `owner_id` | Собственник |
| `user_id` | Ответственный |
| `state` | Стадия |

---

## Справочники

### Районы Алматы

Алатауский, Алмалинский, Ауэзовский, Бостандыкский, Жетысуский, Медеуский, Наурызбайский, Турксибский

### Источники клиентов

Крыша.kz, OLX, Рекомендация, Холодный звонок, Вывеска, Соцсети, Сайт

---

## Стадии объекта

| Стадия | Код |
|--------|-----|
| Новый | `new` |
| В работе | `active` |
| Задаток | `deposit` |
| Сделка | `deal` |
| Снят | `canceled` |
| Архив | `archived` |

---

## Интерфейс

### Вкладки формы

| Вкладка | Содержимое | Кто использует |
|---------|------------|----------------|
| Основное | Тип, цена, адрес | Все |
| Характеристики | Этаж, ремонт, удобства | Listing Coordinator |
| Собственник | Контакт, телефоны | ISA, Listing Agent |
| Документы | Фото, видео, договор | Transaction Coordinator |
| Служебное | Ответственный, стадия | Team Lead |

### Представления

- **List** — таблица с цветовой индикацией
- **Form** — форма с вкладками
- **Kanban** — карточки по стадиям
- **Map** — карта (2GIS)

---

## Права доступа

| Группа | Права |
|--------|-------|
| `estate.group_user` | Просмотр |
| `estate.group_agent` | + Свои объекты |
| `estate.group_coordinator` | + Все объекты |
| `estate.group_manager` | + Удаление, настройки |

### Ограничения

| Поле | Buyer's Agent |
|------|---------------|
| Контакт собственника | Скрыт |
| Внутренние заметки | Скрыты |

---

## Интеграции

| Система | Назначение |
|---------|------------|
| **Odoo CRM** | Сделки |
| **ERP (Telegram)** | Зарплаты, уведомления |
| **2GIS** | Карты, геокодирование |
| **S3** | Хранение фото |
| **Матчинг** | Подбор объектов (план) |

Подробнее: [INTEGRATIONS.md](./INTEGRATIONS.md)

---

## Roadmap

### MVP (v1.0)
- [ ] Модель данных (EAV)
- [ ] Form/List/Search views
- [ ] Базовые права доступа
- [ ] Справочники

### v1.1
- [ ] Загрузка фото (S3)
- [ ] Kanban view

### v1.2
- [ ] Интеграция 2GIS
- [ ] API для ERP

### v2.0
- [ ] Связь с CRM
- [ ] Матчинг
