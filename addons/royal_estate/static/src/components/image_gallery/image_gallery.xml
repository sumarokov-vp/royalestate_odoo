<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="royal_estate.ImageGallery">
        <div class="o_image_gallery">
            <t t-if="props.images.length === 0">
                <div class="o_image_gallery_empty text-muted text-center p-4">
                    <i class="fa fa-image fa-3x mb-2"/>
                    <p>Нет фотографий</p>
                </div>
            </t>
            <t t-else="">
                <div class="o_image_gallery_grid">
                    <t t-foreach="props.images" t-as="image" t-key="image.id">
                        <div
                            t-att-class="getItemClass(image)"
                            t-att-draggable="!props.readonly"
                            t-on-dragstart="(ev) => this.onDragStart(ev, image)"
                            t-on-dragend="onDragEnd"
                            t-on-dragover="(ev) => this.onDragOver(ev, image)"
                            t-on-dragleave="onDragLeave"
                            t-on-drop="(ev) => this.onDrop(ev, image)"
                        >
                            <div
                                class="o_image_gallery_thumbnail"
                                t-on-click="() => this.props.onImageClick(image, image_index)"
                            >
                                <img
                                    t-att-src="image.thumbnailUrl"
                                    t-att-alt="image.name || 'Фото'"
                                    loading="lazy"
                                />
                                <t t-if="image.is_main">
                                    <span class="o_image_main_badge" title="Главное фото">
                                        <i class="fa fa-star"/>
                                    </span>
                                </t>
                                <div class="o_image_overlay">
                                    <i class="fa fa-search-plus"/>
                                </div>
                            </div>
                            <div class="o_image_gallery_item_name" t-if="image.name">
                                <span t-esc="image.name"/>
                            </div>
                        </div>
                    </t>
                </div>
            </t>
        </div>
    </t>
</templates>
