<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="estate_property_view_form" model="ir.ui.view">
        <field name="name">estate.property.form</field>
        <field name="model">estate.property</field>
        <field name="arch" type="xml">
            <form string="Property">
                <header>
                    <field name="state" widget="statusbar" statusbar_visible="new,active,deposit,deal"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="Property Title..."/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="property_type"/>
                            <field name="deal_type"/>
                            <field name="rooms"/>
                            <field name="area_total"/>
                        </group>
                        <group>
                            <field name="price"/>
                            <field name="currency_id" invisible="1"/>
                            <field name="district_id"/>
                            <field name="street"/>
                            <field name="house_number"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Main" name="main">
                            <group>
                                <group string="Description">
                                    <field name="description" nolabel="1" colspan="2"/>
                                </group>
                            </group>
                        </page>
                        <page string="Attributes" name="attributes">
                            <field name="attribute_value_ids">
                                <list editable="bottom">
                                    <field name="attribute_id"/>
                                    <field name="value_char" invisible="field_type != 'char'"/>
                                    <field name="value_integer" invisible="field_type != 'integer'"/>
                                    <field name="value_float" invisible="field_type != 'float'"/>
                                    <field name="value_boolean" invisible="field_type != 'boolean'"/>
                                    <field name="value_selection" invisible="field_type != 'selection'"/>
                                    <field name="value_date" invisible="field_type != 'date'"/>
                                    <field name="field_type" column_invisible="1"/>
                                </list>
                            </field>
                        </page>
                        <page string="Owner" name="owner">
                            <group>
                                <group>
                                    <field name="owner_id"/>
                                    <field name="source_id"/>
                                </group>
                                <group>
                                    <field name="contract_type"/>
                                    <field name="contract_start"/>
                                    <field name="contract_end"/>
                                </group>
                            </group>
                        </page>
                        <page string="Media" name="media">
                            <group>
                                <group>
                                    <field name="video_url" widget="url"/>
                                    <field name="instagram_url" widget="url"/>
                                </group>
                            </group>
                            <field name="image_ids">
                                <list editable="bottom">
                                    <field name="sequence" widget="handle"/>
                                    <field name="name"/>
                                    <field name="image" widget="image" options="{'size': [100, 100]}"/>
                                    <field name="is_main"/>
                                </list>
                            </field>
                        </page>
                        <page string="Service" name="service">
                            <group>
                                <group string="Responsible">
                                    <field name="user_id"/>
                                    <field name="listing_coordinator_id"/>
                                    <field name="listing_agent_id"/>
                                </group>
                                <group string="Settings">
                                    <field name="is_shared"/>
                                    <field name="active"/>
                                </group>
                            </group>
                            <group string="Internal Notes">
                                <field name="internal_note" nolabel="1" colspan="2"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <chatter/>
            </form>
        </field>
    </record>

    <record id="estate_property_view_list" model="ir.ui.view">
        <field name="name">estate.property.list</field>
        <field name="model">estate.property</field>
        <field name="arch" type="xml">
            <list string="Properties" decoration-success="state == 'active'" decoration-warning="state == 'deposit'" decoration-info="state == 'deal'" decoration-muted="state in ('canceled', 'archived')">
                <field name="name"/>
                <field name="property_type"/>
                <field name="deal_type"/>
                <field name="rooms"/>
                <field name="area_total"/>
                <field name="price"/>
                <field name="district_id"/>
                <field name="user_id" optional="hide"/>
                <field name="state"/>
            </list>
        </field>
    </record>

    <record id="estate_property_view_search" model="ir.ui.view">
        <field name="name">estate.property.search</field>
        <field name="model">estate.property</field>
        <field name="arch" type="xml">
            <search string="Search Properties">
                <field name="name"/>
                <field name="street"/>
                <field name="district_id"/>
                <field name="owner_id"/>
                <field name="user_id"/>
                <separator/>
                <filter name="my_properties" string="My Properties" domain="[('user_id', '=', uid)]"/>
                <separator/>
                <filter name="apartments" string="Apartments" domain="[('property_type', '=', 'apartment')]"/>
                <filter name="houses" string="Houses" domain="[('property_type', '=', 'house')]"/>
                <filter name="commercial" string="Commercial" domain="[('property_type', '=', 'commercial')]"/>
                <filter name="land" string="Land" domain="[('property_type', '=', 'land')]"/>
                <separator/>
                <filter name="sale" string="For Sale" domain="[('deal_type', '=', 'sale')]"/>
                <filter name="rent" string="For Rent" domain="[('deal_type', 'in', ['rent_long', 'rent_daily'])]"/>
                <separator/>
                <filter name="active_state" string="Active" domain="[('state', '=', 'active')]"/>
                <filter name="archived" string="Archived" domain="[('active', '=', False)]"/>
                <separator/>
                <filter name="group_type" string="Property Type" context="{'group_by': 'property_type'}"/>
                <filter name="group_deal" string="Deal Type" context="{'group_by': 'deal_type'}"/>
                <filter name="group_district" string="District" context="{'group_by': 'district_id'}"/>
                <filter name="group_state" string="State" context="{'group_by': 'state'}"/>
                <filter name="group_user" string="Responsible" context="{'group_by': 'user_id'}"/>
            </search>
        </field>
    </record>

    <record id="estate_property_view_kanban" model="ir.ui.view">
        <field name="name">estate.property.kanban</field>
        <field name="model">estate.property</field>
        <field name="arch" type="xml">
            <kanban default_group_by="state">
                <field name="name"/>
                <field name="property_type"/>
                <field name="price"/>
                <field name="rooms"/>
                <field name="area_total"/>
                <field name="district_id"/>
                <field name="state"/>
                <templates>
                    <t t-name="card">
                        <field name="name" class="fw-bold fs-5"/>
                        <div class="text-muted">
                            <field name="district_id"/>
                        </div>
                        <div>
                            <field name="rooms"/> rooms, <field name="area_total"/> mÂ²
                        </div>
                        <div class="fw-bold">
                            <field name="price" widget="monetary"/>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record id="estate_property_action" model="ir.actions.act_window">
        <field name="name">Properties</field>
        <field name="res_model">estate.property</field>
        <field name="view_mode">list,kanban,form</field>
        <field name="context">{'search_default_active_state': 1}</field>
    </record>
</odoo>
